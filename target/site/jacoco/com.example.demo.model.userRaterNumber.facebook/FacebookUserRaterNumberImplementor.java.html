<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FacebookUserRaterNumberImplementor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">politics</a> &gt; <a href="index.source.html" class="el_package">com.example.demo.model.userRaterNumber.facebook</a> &gt; <span class="el_source">FacebookUserRaterNumberImplementor.java</span></div><h1>FacebookUserRaterNumberImplementor.java</h1><pre class="source lang-java linenums">package com.example.demo.model.userRaterNumber.facebook;

import com.example.demo.model.userRaterNumber.AbstractUserRaterNumber;
import com.example.demo.model.userRaterNumber.LoginMechanism;

public final class FacebookUserRaterNumberImplementor extends AbstractUserRaterNumber{
	
	/*OP stands for the Oauth2 Provider that is used for logging into the application. 
	 * If facebook is used as the login mechanism or OP, OP will be replaced to FLM which 
	 * stands for Facebook Login Mechanism. FL stands for the first two initials of your facebook
	 * name. For example your facebook name is &quot;test name politics&quot;, FL will be replaced to 'T' and 'N'.
	 * If your facebook name is only made up of one word, FL will then be replaced with the first letter
	 * of your name appended with &quot;G&quot;.
	 */
<span class="fc" id="L15">	private final String pattern = &quot;FLOP-00000000000000&quot;;</span>

	public String getPattern() {
<span class="nc" id="L18">		return pattern;</span>
	}
	
	private FacebookUserRaterNumberImplementor(String name, String accountNumber) {
<span class="fc" id="L22">		super(name.split(&quot; &quot;)[0], name.split(&quot; &quot;)[1], accountNumber, LoginMechanism.FACEBOOK);</span>
<span class="fc" id="L23">	}</span>
	
	/*
	 * Since there is no accurate way of knowing the facebook user's first name and last name 
	 * using its user info on facebook, the first two words in its name are considered as its Full Name.
	 */
	public static FacebookUserRaterNumberImplementor with(String name, String accountNumber) {
<span class="fc" id="L30">		String[] nameArray = name.split(&quot; &quot;);</span>
<span class="fc bfc" id="L31" title="All 2 branches covered.">		if (nameArray.length &lt; 2) {</span>
<span class="fc" id="L32">			String firstName = nameArray[0];</span>
<span class="fc" id="L33">			nameArray = new String[2];</span>
<span class="fc" id="L34">			nameArray[0] = firstName;</span>
<span class="fc" id="L35">			nameArray[1] = &quot;Gss&quot;; //Assignment for &quot;G&quot; if name is a single word</span>
		}
<span class="fc" id="L37">		String finalName = nameArray[0].concat(&quot; &quot; + nameArray[1]);</span>
		
<span class="fc" id="L39">		return new FacebookUserRaterNumberImplementor(finalName, accountNumber);</span>
	}

	@Override
	protected FacebookUserRaterNumberImplementor calculateUserAccountNumber() {
<span class="fc" id="L44">		String finalFirstSectionOfPattern = calculateFirstSectionOfPattern();</span>
		
<span class="fc" id="L46">		String finalSecondSectionOfPattern = calculateSecondSectionOfPattern();</span>
		
<span class="fc" id="L48">		String finalAccountNumber = combineSectionsOfPattern(finalFirstSectionOfPattern, &quot;-&quot; + finalSecondSectionOfPattern);</span>
		
<span class="fc" id="L50">		return new FacebookUserRaterNumberImplementor(firstName() + &quot; &quot; + lastName(), finalAccountNumber);</span>
	}
	
	String calculateFirstSectionOfPattern() {
<span class="fc" id="L54">		String firstSectionOfPatternWithName = convertFAndLOfPatternToNameInitials();</span>
<span class="fc" id="L55">		String firstSectionOfPatternWithLoginMechanism = convertOAndPOfPatternToLoginMechanisms();</span>
		
<span class="fc" id="L57">		String finalFirstSectionOfPattern = combineSectionsOfPattern(firstSectionOfPatternWithName, firstSectionOfPatternWithLoginMechanism);</span>
		
<span class="fc" id="L59">		return finalFirstSectionOfPattern.toUpperCase();</span>
	}
	
	String calculateSecondSectionOfPattern() {
<span class="fc" id="L63">		String secondSectionOfPattern = splitPatternIntoSections(pattern)[1];</span>
		
<span class="fc" id="L65">		String trimmedPattern = secondSectionOfPattern.substring(0, secondSectionOfPattern.length() - accountNumber.length());</span>
		
<span class="fc" id="L67">		String finalSecondSectionOfPattern = combineSectionsOfPattern(trimmedPattern, accountNumber);</span>
		
<span class="fc" id="L69">		return finalSecondSectionOfPattern.toUpperCase();</span>
	}
	
	String convertFAndLOfPatternToNameInitials() {
<span class="fc" id="L73">		String[] nameArray = (firstName() + &quot; &quot; + lastName()).split(&quot; &quot;);</span>
<span class="pc bpc" id="L74" title="1 of 2 branches missed.">		if (nameArray.length &lt; 2) {</span>
<span class="nc" id="L75">			String initialPattern = pattern.replace(&quot;F&quot;, nameArray[0].toUpperCase());</span>
<span class="nc" id="L76">			String finalPattern = initialPattern.replace(&quot;G&quot;, &quot;G&quot;);</span>
<span class="nc" id="L77">			return finalPattern;</span>
		}
		
<span class="fc" id="L80">		String initialPattern = pattern.replace(&quot;F&quot;, String.valueOf(nameArray[0].charAt(0)));</span>
<span class="fc" id="L81">		String finalPattern = initialPattern.replace(&quot;L&quot;, String.valueOf(nameArray[1].charAt(0)));</span>
		
<span class="fc" id="L83">		return splitPatternIntoSections(finalPattern)[0].substring(0,2).toUpperCase();</span>
	}
	
	String convertOAndPOfPatternToLoginMechanisms() {
<span class="fc" id="L87">		String[] firstSectionOfPattern = splitPatternIntoSections(pattern);</span>
<span class="fc" id="L88">		String patternWithoutFAndL = firstSectionOfPattern[0].substring(2);</span>
<span class="fc" id="L89">		String initialPattern = patternWithoutFAndL.replace(&quot;O&quot;, String.valueOf(getLoginMechanism().toString().charAt(0)));</span>
<span class="fc" id="L90">		String finalPattern = initialPattern.replace(&quot;P&quot;, &quot;L&quot;).concat(&quot;M&quot;);</span>
		
<span class="fc" id="L92">		return finalPattern;</span>
	}
	
	private String[] splitPatternIntoSections(String section) {
<span class="fc" id="L96">		return section.split(&quot;-&quot;);</span>
	}
	
	private String combineSectionsOfPattern(String first, String Second) {
<span class="fc" id="L100">		return first.concat(Second);</span>
	}
	
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>